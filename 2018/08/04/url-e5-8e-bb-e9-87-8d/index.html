<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>url去重处理 | guimaizi&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="guimaizi&#39;s blog" type="application/atom+xml">
    
<meta name="generator" content="Hexo 4.2.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/archives" class="header__link">Archive</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">guimaizi&#39;s blog</a></h1>
		<h2 class="header__subtitle">道心不改,灵台无尘。</h2>
	</header>

	<main>
		<article>
	
		<h1>url去重处理</h1>
	
	<div class="article__infos">
		<span class="article__date">2018-08-04</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/%E5%AE%89%E5%85%A8-%E4%BB%A3%E7%A0%81/">安全/代码</a>
			</span><br />
		
		
	</div>

	

	
		<h3 id="python3代码"><a href="#python3代码" class="headerlink" title="python3代码:"></a>python3代码:</h3><pre><code># coding: utf-8
&apos;&apos;&apos;
Created on 2018年7月1日

@author: guimaizi
&apos;&apos;&apos;
import urllib.parse,os.path,re
class filter_url:
    def __init__(self):
        self.list_url_static=[]
    def filter_url(self,url):
        url=urllib.parse.urlparse(url)
        if url.query!=&apos;&apos;:
            print(self.params_filter(url))
            pass
        elif url.query==&apos;&apos;:
            self.static_filter(url)
        elif url.path==&apos;&apos;:
            print(url)
    def static_filter(self,url):
        #伪静态与url路径处理
        urls=os.path.splitext(url.path)
        if urls[1]!=&apos;&apos;:
            list_url=[]
            for i in urls[0].split(&apos;/&apos;):
                if i!=&apos;&apos;:list_url.append(&apos;{%s:%s}&apos;%(self.judgetype(i),len(i)))
            url_path=&quot;/&quot;.join(list_url)
            print(url.scheme + &apos;://&apos; + url.netloc +&apos;/&apos;+ url_path + urls[1])
        else:
            list_url=[]
            for i in url.path.split(&apos;/&apos;):
                if i!=&apos;&apos;:list_url.append(&apos;{%s:%s}&apos;%(self.judgetype(i),len(i)))
            url_path=&quot;/&quot;.join(list_url)
            print(url.scheme + &apos;://&apos; + url.netloc +&apos;/&apos;+ url_path)
    def params_filter(self,url):
        #url参数处理
        liststr = []
        try:
            liststr = []
            for i in url.query.split(&apos;&amp;&apos;):
                para = i.split(&apos;=&apos;)
                length_int = len(para[1])
                if self.judgetype(para[1]) == &apos;int&apos;:
                    para[1] = &apos;{int:%s}&apos; % length_int
                else:
                    para[1] = &apos;{str:%s}&apos; % length_int
                para = &apos;=&apos;.join(para)
                liststr.append(para)
            url_paras=&apos;&amp;&apos;.join(liststr)
            return url.scheme + &apos;://&apos; + url.netloc + url.path + &apos;?&apos; + url_paras
        except:
            length_int = len(url.query)
            url_paras = &apos;{&apos;+self.judgetype(url.query) + &apos;:%s}&apos; % length_int
            return url.scheme + &apos;://&apos; + url.netloc + url.path + &apos;?&apos; + url_paras
    def callback_content(self,content):
        ret = re.split(r&apos;-|_|\.&apos;,content)
    def judgetype(self, strs):
        try:
            int(strs)
            return &apos;int&apos;
        except:
            return &apos;str&apos;
if __name__ == &apos;__main__&apos;:
    urlss = [&apos;http://www.target.cn/zxft/20483.htm?dsdsa&apos;,&apos;http://www.target.cn/zxft.php&apos;,\
             &apos;http://www.target.cn/zxft/20483.htm&apos;,&apos;http://www.target.cn/zxft/20483.htm?dsdsa=dsadsa&amp;dada=1&apos;,\
             &apos;http://www.target.cn/zxft/31231.htm&apos;,&apos;http://www.target.cn/zxft/31231&apos;,\
             &apos;http://www.target.cn/&apos;,&apos;http://www.target.cn/zxft/20483.htm?dsdsa=ds1adsa&amp;dada=231231&apos;,\
             &apos;http://www.target.cn/dsadsa/&apos;,&apos;http://www.target.cn/2131&apos;,&apos;http://www.target.cn/user&apos;,\
             &apos;http://www.target.cn/da1s_dasd/&apos;,&apos;http://www.target.cn/das_dasd?das=121&apos;,&apos;http://www.target.cn/index.php/thanks&apos;,\
             &apos;http://www.target.cn/?a=dasd&apos;]
    p = filter_url()
    for i in urlss:
        p.filter_url(i)</code></pre><h3 id="处理结果"><a href="#处理结果" class="headerlink" title="处理结果:"></a>处理结果:</h3><p><figure class="figure"><img src="https://s1.ax1x.com/2018/08/04/PBLbh8.png" alt=""></figure></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料:"></a>参考资料:</h3><p><a href="https://github.com/ring04h/papers/blob/master/WEB2.0%E5%90%AF%E5%8F%91%E5%BC%8F%E7%88%AC%E8%99%AB%E5%AE%9E%E6%88%98-%E7%8C%AA%E7%8C%AA%E4%BE%A0-20180616.pdf" target="_blank" rel="noopener">WEB2.0启发式爬虫实战-猪猪侠</a><br><a href="https://security.tencent.com/index.php/blog/msg/34" target="_blank" rel="noopener">SuperSpider——打造功能强大的爬虫利器</a><br><a href="https://github.com/guimaizi/nimendoushilaji" target="_blank" rel="noopener">爬虫+扫描器</a></p>

	

	
		<span class="different-posts"><a href="/2018/08/04/url-e5-8e-bb-e9-87-8d/" onclick="window.history.go(-1); return false;">⬅️ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>Hi there, <br />welcome to my Blog glad you found it. Have a look around, will you?</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2020 guimaizi | Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> | Theme <a href="https://github.com/HoverBaum/meilidu-hexo" target="_blank" rel="noopener">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
