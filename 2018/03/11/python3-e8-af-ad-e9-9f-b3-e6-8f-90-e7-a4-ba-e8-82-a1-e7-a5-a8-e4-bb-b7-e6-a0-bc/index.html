<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>python3语音提示股票价格 | guimaizi&#39;s blog</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="guimaizi&#39;s blog" type="application/atom+xml">
    
<meta name="generator" content="Hexo 4.2.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/archives" class="header__link">Archive</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">guimaizi&#39;s blog</a></h1>
		<h2 class="header__subtitle">道心不改,灵台无尘。</h2>
	</header>

	<main>
		<article>
	
		<h1>python3语音提示股票价格</h1>
	
	<div class="article__infos">
		<span class="article__date">2018-03-11</span><br />
		
			<span class="article__category">
				<a class="article-category-link" href="/categories/%E5%AE%89%E5%85%A8-%E4%BB%A3%E7%A0%81/">安全/代码</a>
			</span><br />
		
		
	</div>

	

	
		<p>python3语音提示股票价格涨幅 成交量</p>
<p># coding: utf-8<br>‘’’</p>
<p>@author: rasca1<br>‘’’<br>import tushare as ts,subprocess,pyttsx3<br>from asyncio.tasks import sleep<br>class Stock_reporting:<br>    def to_chinese(self,number):<br>        “”” convert integer to Chinese numeral “””<br>        chinese_numeral_dict = {<br>            ‘0’: ‘零’,<br>            ‘1’: ‘一’,<br>            ‘2’: ‘二’,<br>            ‘3’: ‘三’,<br>            ‘4’: ‘四’,<br>            ‘5’: ‘五’,<br>            ‘6’: ‘六’,<br>            ‘7’: ‘七’,<br>            ‘8’: ‘八’,<br>            ‘9’: ‘九’<br>        }<br>        chinese_unit_map = [(‘’, ‘十’, ‘百’, ‘千’),<br>                            (‘万’, ‘十万’, ‘百万’, ‘千万’),<br>                            (‘亿’, ‘十亿’, ‘百亿’, ‘千亿’),<br>                            (‘兆’, ‘十兆’, ‘百兆’, ‘千兆’),<br>                            (‘吉’, ‘十吉’, ‘百吉’, ‘千吉’)]<br>        chinese_unit_sep = [‘万’, ‘亿’, ‘兆’, ‘吉’]<br>        reversed_n_string = reversed(str(number))<br>        result_lst = []<br>        unit = 0<br>        for integer in reversed_n_string:<br>            if integer is not ‘0’:<br>                result_lst.append(chinese_unit_map[unit // 4][unit % 4])<br>                result_lst.append(chinese_numeral_dict[integer])<br>                unit += 1<br>            else:<br>                if result_lst and result_lst[-1] != ‘零’:<br>                    result_lst.append(‘零’)<br>                unit += 1</p>
<pre><code>    result_lst.reverse()
    if result_lst\[-1\] is &apos;零&apos;:
        result_lst.pop()
    result\_lst = list(&apos;&apos;.join(result\_lst))
    for unit\_sep in chinese\_unit_sep:
        flag = result\_lst.count(unit\_sep)
        while flag &gt; 1:
            result\_lst.pop(result\_lst.index(unit_sep))
            flag -= 1
    return &apos;&apos;.join(result_lst)
def say(self,text):
    #res=subprocess.call(&apos;say &apos; + text,shell=True)
    print(text)
    engine = pyttsx3.init();
    engine.say(text);
    engine.runAndWait() ;
def mains(self,stock_code):
    df = ts.get\_realtime\_quotes(stock_code) #Single stock symbol
    data=str(df\[\[&apos;name&apos;,&apos;pre_close&apos;,&apos;price&apos;,&apos;amount&apos;\]\]).split()
    #print(data)
    money=int(float(data\[-1\]))
    if int(money)&gt;5:
        Amount=round(money/10000,0)*10000
    else:
        Amount=money
    tests=&apos;股票 %s 当前价格  %s ,涨跌幅 %s ,成交量  %s&apos;%(data\[5\],data\[7\],round((float(data\[7\])-float(data\[6\]))/float(data\[6\])*100,2),self.to_chinese(int(Amount)))
    #print(tests)
    self.say(tests)</code></pre><p>if __name__==’__main__‘:<br>    itme=Stock_reporting()<br>    for i in [‘600062’,’601607’]:<br>        itme.mains(i)<br>        sleep(5)</p>

	

	
		<span class="different-posts"><a href="/2018/03/11/python3-e8-af-ad-e9-9f-b3-e6-8f-90-e7-a4-ba-e8-82-a1-e7-a5-a8-e4-bb-b7-e6-a0-bc/" onclick="window.history.go(-1); return false;">⬅️ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>Hi there, <br />welcome to my Blog glad you found it. Have a look around, will you?</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2020 guimaizi | Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> | Theme <a href="https://github.com/HoverBaum/meilidu-hexo" target="_blank" rel="noopener">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
